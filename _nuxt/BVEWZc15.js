import{f as e,aA as r,J as a,r as t,y as s,g as n,m as l,aC as i,al as o,no as u,c as d,o as c,b as m,i as v,bE as p,v as f,c4 as b,np as A,a as _,U as h,t as y,aj as k,L as j,w as T,D as g,F as N,C as x,S as $,d as C,B as w,aI as S,$ as F,a4 as U,ah as L,ai as O,aN as R,s as V,aU as H,a2 as B,_ as E,cH as I}from"./BY9EIVYr.js";import{L as K,s as X,d as z}from"./DB5tKg2v.js";import{E as D}from"./DuT2dQq8.js";import"./CMuzpZS2.js";import"./BObx0-it.js";import"./DNHovcs4.js";import"./khxch50D.js";import"./DBQWc8Xl.js";import"./DxpqxFqd.js";import"./D600_RKl.js";import"./BdSP2G6B.js";import"./CJXpfIx0.js";import"./BZI4qv_R.js";import"./DJKaFdKc.js";import"./dPr5-CpI.js";import"./_R2nDvl_.js";import"./C04P7iJb.js";import"./Cu9oaoDx.js";import"./BxT7OH1S.js";import"./DhwfMf61.js";import"./CdSQZM4X.js";import"./gfa7pY1Q.js";import"./CWSF7Zrv.js";import"./B7cUFrfB.js";import"./CymzNdFE.js";import"./BQhZAvhG.js";import"./CJic4ssJ.js";const J=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const p=e,f=r(),b=a(!1),A=a(!0),_=t([]),h=a({sort_by:"",order:""}),y=a(""),k=a(""),j=a(""),T=t([]),g=s(),N=n((()=>{var e;return null==(e=f.params)?void 0:e.id})),x=n((()=>{const e=j.value?T.value||[]:_.value||[];return y.value?"sol"==k.value?(null==e?void 0:e.filter((e=>e.sol_first_transfer_in_from==y.value)))||[]:(null==e?void 0:e.filter((e=>e.token_first_transfer_in_from==y.value)))||[]:e||[]}));function $(e){if(!i().currentAddress)return;const r={sort_by:null==e?void 0:e.sort_by,order:null==e?void 0:e.order},a={token_id:N.value,self_address:i().currentAddress,...r};h.value=r,b.value=!0,u(a).then((e=>{const r=(null==e?void 0:e.holderStats)||[];_.value=r||[]})).catch((()=>{_.value=[]})).finally((()=>{b.value=!1}))}function C(e){var r;$({sort_by:e.prop,order:null==(r=e.order)?void 0:r.replace("ending","")})}function w(e){if(j.value=e||"",!j.value)return void $(h.value);const r={token_id:N.value,self_address:i().currentAddress,keyword:j.value};b.value=!0,X(r).then((e=>{T.value=Array.isArray(e)?e:[]})).catch((()=>{T.value=[]})).finally((()=>{b.value=!1}))}function S(e){y.value?(y.value="",k.value=""):(y.value=e.address||"",k.value=e.type||"")}return l((()=>g.headFollowsNum.all),(()=>{"Attention"==p.currentActiveTab&&$()})),l(N,(()=>{"Attention"==p.currentActiveTab&&$()})),l((()=>i().currentAddress),(e=>{e?"Attention"==p.currentActiveTab&&$():_.value=[]})),o((()=>{"Attention"==p.currentActiveTab&&$()})),(e,r)=>(c(),d("div",null,[m(K,{ref:"holdersRef",tableList:v(x),loading:v(b),searchOriginKeyword:v(y),searchOriginType:v(k),isAttention:v(A),onHandleSortChange:C,onFilterAddress:w,onFilterOriginAddress:S},null,8,["tableList","loading","searchOriginKeyword","searchOriginType","isAttention"])]))}}),M={class:"histrory"},P={class:"top"},q={key:0,class:"content"},G=["onClick"],Q=E(e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const u=e,E=p(),{t:I}=f(),K=r(),X=a(!1),J=t([]),Q=n((()=>{var e;return null==(e=K.params)?void 0:e.id})),W=s(),Y=a(!1),Z=t(),ee=n((()=>E.token)),re=n((()=>{var e;const r=b(K.params.id);return(null==r?void 0:r.chain)||(null==(e=ee.value)?void 0:e.chain)||""})),ae=n((()=>Math.max(E.commonHeight-150,450)));function te(){if(!i().currentAddress)return;const e={token_id:Q.value,address:i().currentAddress};X.value=!0,A(e).then((e=>{J.value=e||[]})).finally((()=>{X.value=!1}))}return l((()=>W.headFollowsNum.all),(()=>{"Attention"==u.currentActiveTab&&te()})),l(Q,(()=>{"Attention"==u.currentActiveTab&&te()})),l((()=>i().currentAddress),(e=>{e?"Attention"==u.currentActiveTab&&te():J.value=[]})),o((()=>{"Attention"==u.currentActiveTab&&te()})),(e,r)=>{const a=w,t=S,s=R,n=D,l=k;return c(),d("div",M,[_("div",P,[_("span",null,y(e.$t("address")),1),_("span",null,y(e.$t("remark")),1),_("span",null,y(e.$t("buy")),1),_("span",null,y(e.$t("sell")),1),_("span",null,y(e.$t("Txs"))+" ("+y(e.$t("buy1"))+")",1),_("span",null,y(e.$t("Txs"))+" ("+y(e.$t("sell1"))+")",1),_("span",null,y(e.$t("currentPosition")),1),_("span",null,y(e.$t("balance")),1),_("span",null,y(e.$t("profit")),1)]),h((c(),j(n,{height:v(ae)},{default:T((()=>{var n;return[v(J).length>0?(c(),d("ul",q,[(c(!0),d(N,null,x(v(J),((s,n)=>{var l;return c(),d("li",{key:n,class:"flex",onClick:$((e=>function(e){var r;Y.value=!0,null==(r=Z.value)||r.getUserTxs(e.address)}({address:s.user_address})),["stop"])},[_("span",null,[m(a,{ref_for:!0,ref:"attentionTriggerRef",name:"custom:attention",class:"h-16px w-16px clickable shrink-0 color-[#F45469] align-middle",onClick:$((e=>function(e,r){const a={address:i().currentAddress,user_address:e.user_address,user_chain:re.value};H(a).then((()=>{var e;W.getFollowsNum(),B.success(I("attention1Canceled")),null==(e=J.value)||e.splice(r,1)})).catch((e=>{})).finally((()=>{}))}(s,n)),["stop","prevent"])},null,8,["onClick"]),C(" *"+y(null==(l=s.user_address)?void 0:l.slice(-6)),1)]),_("div",{class:"flex-end",onClick:r[0]||(r[0]=$((()=>{}),["stop","prevent"]))},[m(t,{addressClass:"token-symbol ellipsis",addressStyle:"max-width: 70px",showAddressTitle:"",address:s.user_address,chain:v(re),remark:s.remark,onUpdateRemark:({remark:e})=>s.remark=e},null,8,["address","chain","remark","onUpdateRemark"])]),_("div",null,y(("formatNumber"in e?e.formatNumber:v(F))(s.bug_amount||0,2)),1),_("div",null,y(("formatNumber"in e?e.formatNumber:v(F))(s.sell_amount||0,2)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:v(F))(s.bug_count||0,0)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:v(F))(s.sell_count||0,0)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:v(F))(s.current_position||0,2)),1),_("span",null,"$"+y(("formatNumber"in e?e.formatNumber:v(F))(s.position_value||0,2)),1),_("div",null,[_("span",{class:"value",style:U({color:s.profit>=0?v(L)[0]:v(O)[0]})}," $"+y(("formatNumber"in e?e.formatNumber:v(F))(s.profit||0,2)),5)])],8,G)})),128))])):g("",!0),v(J)&&0!==(null==(n=v(J))?void 0:n.length)||v(X)?g("",!0):(c(),j(s,{key:1,class:"mt-200px"}))]})),_:1},8,["height"])),[[l,v(X)]]),m(z,{ref_key:"profitLossRef1",ref:Z,modelValue:v(Y),"onUpdate:modelValue":r[1]||(r[1]=e=>V(Y)?Y.value=e:null)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-bb7a359a"]]),W=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const a=e,t=r(),s=p(),l=n((()=>{var e;const r=b(t.params.id);return(null==r?void 0:r.chain)||(null==(e=s.token)?void 0:e.chain)||""}));return(e,r)=>v(I).includes(v(l))?(c(),j(J,{key:0,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"])):(c(),j(Q,{key:1,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"]))}});export{W as default};
