import{f as e,v as l,af as a,y as t,r as o,m as n,j as r,g as s,T as u,c as p,o as i,F as c,a as d,b as f,D as v,S as m,G as x,t as g,C as b,i as k,B as _,w as h,b4 as F,s as y,H as w,d as C,Z as V,U as $,L as N,b5 as G,b6 as A,M as R,p as j,_ as z}from"./BY9EIVYr.js";import{E as D}from"./DuT2dQq8.js";import S from"./BIpqJgAE.js";import{V as U}from"./BlbMzJvQ.js";const B={class:"w-tabs flex-1 flex-wrap"},E=["onClick"],I={class:"clickable color-[var(--d-999-l-666)]! flex gap-2px bg-[var(--d-222-l-F2F2F2)]!"},M={class:"font-500 text-14px lh-[120%] tracking-0% text-[--d-FFF-l-333]"},q={class:"mb-8px text-14px lh-[120%]"},L={class:"flex-between w-100%"},O={class:"flex-between w-100%"},H=z(e({__name:"proGroups",props:{options:{type:Array,default:()=>[]},modelValue:{type:Number,default:0}},emits:["onConfirm","onDelete","onCancel","update:modelValue","onChangeIndex","onAdd","update:options"],setup(e,{emit:z}){const{t:H}=l(),{lang:P,isDark:T}=a(t()),Z=z,J=e,K=o({buttonRefs:{}}),Q=o(J.options);n((()=>J.options),(e=>{Q.value=e}));const W=o(),X=r({groupName:""}),Y=s((()=>({groupName:[{required:!0,message:H("groupName")+(P.value.indexOf("zh")>-1?"":"&nbsp;")+H("cannotBeEmpty"),trigger:"change"}]}))),ee=o(""),le=o({}),ae=o(),te=o(!1),oe=o(),ne=o(),re=o(),se=o(),ue=o(!1);function pe(){Q.value=J.options}function ie(){te.value=!1,le.value[ae.value]=!1}function ce(){le.value[ae.value]=!0,j((()=>{var e;null==(e=document.querySelector(".name-input input"))||e.focus()}))}function de(){le.value[ae.value]=!1,Z("onCancel",ae.value)}function fe(){Z("onDelete",ae.value)}function ve(){var e,l;Z("onAdd",ee.value),null==(l=null==(e=re.value)?void 0:e.close)||l.call(e)}function me(){var e,l;null==(l=null==(e=se.value)?void 0:e.hide)||l.call(e),Z("onChangeIndex",Q.value.map((e=>e.group_id)))}return n((()=>le.value),(e=>{}),{deep:!0}),n(ee,(e=>{})),(e,l)=>{const a=_,t=D,o=w,n=V,r=R,s=A,j=G,z=u("click-outside");return i(),p(c,null,[d("ul",B,[d("li",{class:x(["clickable text-[var(--d-666-l-999)]",{active:0===J.modelValue}]),onClick:l[0]||(l[0]=m((e=>Z("update:modelValue",0)),["stop","prevent"]))},[d("span",null,g(e.$t("defaultGroup")),1)],2),J.options.length>0?(i(!0),p(c,{key:0},b(J.options,(e=>(i(),p("li",{key:e.group_id,class:x(["clickable flex gap-2px text-[var(--d-666-l-999)]",{active:J.modelValue===e.group_id}]),onClick:m((l=>Z("update:modelValue",e.group_id)),["stop","prevent"])},[d("span",null,g(e.name),1),f(a,{ref_for:!0,ref:l=>k(K).buttonRefs[e.group_id]=l,name:"mdi:dots-vertical",class:"text-14px",onClick:m((l=>{oe.value=k(K).buttonRefs[e.group_id],te.value=!0,ae.value=e.group_id,k(X).groupName=e.name}),["stop","prevent"])},null,8,["onClick"])],10,E)))),128)):v("",!0),d("li",{ref_key:"addButtonRef",ref:ne,class:"clickable color-[var(--d-999-l-666)]! flex gap-2px bg-[var(--d-222-l-F2F2F2)]!"},[f(a,{name:"custom:add-icon",class:"text-12px"}),d("span",null,g(e.$t("newGroup")),1)],512),f(n,{ref_key:"popoverRef2",ref:se,width:320,trigger:"click",onAfterLeave:pe},{reference:h((()=>[d("li",I,[f(a,{name:"custom:list-icon",class:"text-12px"}),d("span",null,g(e.$t("groupManage")),1)])])),default:h((()=>[d("div",M,[d("div",q,g(e.$t("groupManage")),1),f(t,{"wrap-class":"mb-12px max-h-[400px]"},{default:h((()=>[f(k(U),F({modelValue:k(Q),"onUpdate:modelValue":l[1]||(l[1]=e=>y(Q)?Q.value=e:null),class:"flex flex-col",tag:"ul"},{animation:300},{"item-key":"show_index",onStart:l[2]||(l[2]=e=>ue.value=!0),onEnd:l[3]||(l[3]=e=>ue.value=!1)}),{default:h((()=>[(i(!0),p(c,null,b(k(Q),(e=>(i(),p("li",{key:null==e?void 0:e.show_index,class:"flex-between font-400 py-12px px-8px hover:bg-[--d-2A2A2A-l-F2F2F2] cursor-move"},[d("span",null,g(null==e?void 0:e.name),1),f(a,{name:"material-symbols:dehaze",class:"text-16px text-[var(--d-666-l-999)]"})])))),128))])),_:1},16,["modelValue"])])),_:1}),d("div",L,[f(o,{color:k(T)?"#333333":"#f2f2f2",class:"flex-1",onClick:l[4]||(l[4]=m((()=>{var e,l;return null==(l=null==(e=k(se))?void 0:e.hide)?void 0:l.call(e)}),["stop","prevent"]))},{default:h((()=>[C(g(e.$t("cancel")),1)])),_:1},8,["color"]),f(o,{type:"primary",class:"flex-1",color:"#3F80F7",onClick:m(me,["stop","prevent"])},{default:h((()=>[C(g(e.$t("confirm")),1)])),_:1})])])])),_:1},512)]),f(n,{visible:k(te),"virtual-ref":k(oe),trigger:"click",title:"","virtual-triggering":"","popper-style":"width: 86px;min-width: 86px;"},{default:h((()=>[$((i(),p("ul",null,[d("li",{class:"font-400 text-12px lh-[100%] tracking-0px mb-20px flex-start gap-4px clickable",onClick:m(ce,["stop","prevent"])},[f(a,{name:"fe:edit",class:"color-#666 text-14px mt-0px"}),d("span",null,g(e.$t("rename")),1)]),d("li",{class:"font-400 text-12px lh-[100%] tracking-0px clickable flex-start gap-4px",onClick:m(fe,["stop","prevent"])},[f(a,{name:"bx:bxs-trash-alt",class:"text-15px color-#666 mt-0px"}),d("span",null,g(e.$t("delete")),1)])])),[[z,()=>te.value=!1]])])),_:1},8,["visible","virtual-ref"]),f(n,{visible:k(le)[k(ae)],"virtual-ref":k(oe),trigger:"click",title:e.$t("rename"),"virtual-triggering":"","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--d-FFF-l-000)",width:"248",teleported:!1},{default:h((()=>[$((i(),N(j,{ref_key:"formRef",ref:W,model:k(X),rules:k(Y),onSubmit:l[6]||(l[6]=m((e=>{var l;(l=k(W))&&l.validate(((e,l)=>{var a;e&&(Z("onConfirm",ae.value,X.groupName),null==(a=W.value)||a.resetFields(),le.value[ae.value]=!1)}))}),["prevent","stop"]))},{default:h((()=>[f(s,{prop:"groupName","label-position":"top",size:"large",class:"mb-20px!"},{default:h((()=>[f(r,{modelValue:k(X).groupName,"onUpdate:modelValue":l[5]||(l[5]=e=>k(X).groupName=e),class:"[&&]:[--el-fill-color-blank:var(--d-666-l-F2F2F2)]",placeholder:k(H)("enterGroupName"),maxlength:50,"show-word-limit":"",clearable:""},null,8,["modelValue","placeholder"])])),_:1}),f(s,{class:"mb-0px!"},{default:h((()=>[d("div",O,[f(o,{color:k(T)?"#333333":"#f2f2f2",class:"flex-1",onClick:m(de,["stop","prevent"])},{default:h((()=>[C(g(e.$t("cancel")),1)])),_:1},8,["color"]),f(o,{type:"primary",color:"#3F80F7",class:"flex-1","native-type":"submit"},{default:h((()=>[C(g(e.$t("confirm")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])),[[z,ie]])])),_:1},8,["visible","virtual-ref","title"]),f(S,{ref_key:"proPopoverRef",ref:re,modelValue:k(ee),"onUpdate:modelValue":l[7]||(l[7]=e=>y(ee)?ee.value=e:null),"button-ref":k(ne)||{},width:"248",label:e.$t("newGroup"),placeholder:e.$t("enterGroupName"),prop:"name",title:e.$t("newGroup"),onOnConfirm:ve},null,8,["modelValue","button-ref","label","placeholder","title"])],64)}}}),[["__scopeId","data-v-b051e4a1"]]);export{H as default};
