import{b7 as a,aS as t,P as e,Q as s,a2 as o,f as n,v as c,g as r,c as l,o as i,U as u,a as p,aj as d,L as m,w as f,b as g,S as b,t as v,H as x,d as y,i as _,aN as h,by as k,bz as w,_ as C}from"./BY9EIVYr.js";import{E as $,a as j}from"./CWSF7Zrv.js";import"./BObx0-it.js";import"./DuT2dQq8.js";import{d as B,e as F,s as G,o as T,c as D}from"./DxpqxFqd.js";import{E as A}from"./BQ1AH5SE.js";import"./B7cUFrfB.js";function E(n="add"){const{$i18n:c}=a();return new Promise(((r,l)=>{t.prompt("",c.t("enterGroupName"),{confirmButtonText:c.t("confirm1"),cancelButtonText:c.t("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||(l(),c.t("maximum10characters")):(l(),c.t("enterGroupName"))}).then((({value:t})=>{"add"===n?function(t,n,c){const{evmAddress:r}=e(),{address:l}=s(),{$i18n:i}=a(),u=A.service();B(t,r||l).then((()=>{o.success(i.t("success")),n(!0)})).catch((a=>{o.error(i.t("fail")),c()})).finally((()=>{u.close()}))}(t,r,l):r(t)}))}))}const z={class:"w-full px-5px [&&]:text-12px"},N=["onClick"],V=["onClick"],I=C(n({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(a){const{t:n}=c(),C=e(),B=s(),A=r((()=>C.evmAddress||B.address)),I=k(w.FAV_DIALOG),L=a,S=r((()=>L.list.slice(1)));async function U(a){const{value:e}=await t.prompt("",n("enterRemark"),{confirmButtonText:n("confirm1"),cancelButtonText:n("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||n("maximum10characters"):n("cannotBeEmpty")});!async function(a,t){try{await F(a,t,A.value),o.success(n("success")),L.getData(),I.emit({type:"changeFavoriteGroupName"})}catch(e){}}(e,a.group_id)}async function H(a,t,e){const s=a.group_id,c=t+e;if(c<0||c+1>S.value.length)return;const r=S.value[c].group_id;try{await T(s,r,A.value),o.success(n("success")),L.getData()}catch(l){o.error(n("fail"))}}async function M(){await E(),L.getData()}return(e,s)=>{const c=h,r=$,k=x,w=j,C=d;return i(),l("div",z,[u((i(),m(w,{data:_(S),height:"325px",class:"[--el-font-size-base:12px] table-fav-group"},{empty:f((()=>[g(c)])),default:f((()=>[g(r,{label:e.$t("groupName"),prop:"name"},null,8,["label"]),g(r,{label:e.$t("rename"),align:"center"},{default:f((({row:a})=>[p("span",{class:"cursor-pointer",onClick:b((t=>U(a)),["stop","prevent"])},v(e.$t("edit")),9,N)])),_:1},8,["label"]),g(r,{prop:"name",label:e.$t("sort"),align:"center"},{default:f((({row:a,$index:t})=>[g(k,{size:"large",link:"",disabled:0===t,onClick:b((e=>async function(a,t){if(0!==t)try{await G(a.group_id,A.value),o.success(n("success")),L.getData()}catch(e){o.error(n("fail"))}}(a,t)),["stop"])},{default:f((()=>[y(v(e.$t("top")),1)])),_:2},1032,["disabled","onClick"]),g(k,{link:"",size:"large",disabled:0===t,onClick:b((e=>H(a,t,-1)),["stop"])},{default:f((()=>[y(v(e.$t("up")),1)])),_:2},1032,["disabled","onClick"]),g(k,{link:"",size:"large",disabled:t+1===_(S).length,onClick:b((e=>H(a,t,1)),["stop"])},{default:f((()=>[y(v(e.$t("down")),1)])),_:2},1032,["disabled","onClick"])])),_:1},8,["label"]),g(r,{label:e.$t("operate"),align:"center"},{default:f((({row:a})=>[p("span",{class:"cursor-pointer",onClick:b((e=>async function(a){await t.confirm(n("removeFavGroupTips"),n("tips"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await D(a.group_id,A.value),o.success(n("success")),L.getData(),I.emit({type:"removeFavoriteGroup",groupId:a.group_id})}catch(e){}}(a)),["stop","prevent"])},v(e.$t("delete")),9,V)])),_:1},8,["label"])])),_:1},8,["data"])),[[C,a.loading]]),p("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--main-text] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:M},v(_(n)("newGroup")),1)])}}}),[["__scopeId","data-v-07bb091b"]]);export{I as default};
