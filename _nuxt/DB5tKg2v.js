import{b7 as e,f as t,bE as l,h as a,af as s,y as r,bw as o,r as i,v as n,z as d,aA as u,J as c,O as m,g as v,c4 as f,T as _,c as p,o as h,U as b,aj as g,i as x,L as y,w as k,b as w,a as $,t as A,B as N,S as C,G as L,aI as F,d as D,a4 as T,$ as B,D as S,Z as M,s as z,M as I,H,bB as O,I as V,F as q,b8 as E,a8 as U,a3 as Y,aL as P,aM as j,cH as R,aC as K,P as G,Q as J,bA as Q,aU as W,a2 as Z,a0 as X,_ as ee,m as te,C as le,ah as ae,ai as se,nl as re,cB as oe,ad as ie,E as ne}from"./BY9EIVYr.js";import{_ as de,E as ue}from"./CMuzpZS2.js";import{a as ce,E as me}from"./CWSF7Zrv.js";import"./BObx0-it.js";import{E as ve}from"./DuT2dQq8.js";import{E as fe}from"./DBQWc8Xl.js";function _e(t){const{$api:l}=e();return l("/v1api/v3/stats/holders",{method:"get",query:t})}function pe(t){const{$api:l}=e();return l("/v1api/v2/stats/top100range",{method:"get",query:{token_id:t}})}function he(t){const{$api:l}=e();return l("/v1api/v3/stats/top100balance",{method:"get",query:{token_id:t.token_id,size:100,address:t.address}})}function be(t){const{$api:l}=e();return l("/v1api/v3/stats/holder",{method:"get",query:t})}function ge(t){const{$api:l}=e();return l("/v1api/v3/stats/alltags/stats",{method:"get",query:t})}function xe(t){const{$api:l}=e();return l("/v1api/v3/stats/alltags/holders",{method:"get",query:{address:localStorage.bot_evmAddress||localStorage.walletAddress,...t}})}function ye(t){const{$api:l}=e();return l("/v1api/v3/stats/alltags/activities",{method:"get",query:{address:localStorage.bot_evmAddress||localStorage.walletAddress,...t}})}function ke(t,l){const{$api:a}=e();return a("/v2api/holders/v1/token/count/light",{method:"get",query:{token:t,chain:l}})}function we(t,l,a){const{$api:s}=e();return s("/v2api/holders/v1/token/holders/light",{method:"get",query:{token:t,chain:l,top_n:a}})}function $e(t,l,a){const{$api:s}=e();return s("/v2api/holders/v1/token/count/interval",{method:"get",query:{token:t,chain:l,interval:a}})}function Ae(t,l,a){const{$api:s}=e();return s("/v2api/holders/v1/token/top_holders/ratio",{method:"get",query:{token:t,chain:l,interval:a}})}const Ne={class:"holder-list"},Ce={key:0,class:"flex flex-col items-center justify-center py-30px"},Le={key:0,src:P},Fe={key:1,src:j},De={key:1},Te={class:"flex items-center"},Be={class:"flex mt-10px"},Se={class:"mt-20px"},Me={class:"flex items-baseline"},ze={class:"flex-start"},Ie={class:"color-[--third-text] mr-10px"},He={class:"relative"},Oe={class:"flex-start"},Ve={style:{position:"relative",padding:"0 4px 0","line-height":"1"}},qe={class:"text-[--third-text]"},Ee={class:"line-bar"},Ue={style:{display:"inline-flex","align-items":"center"}},Ye={key:0,class:"text-12px",style:{color:"#f6465d"}},Pe={key:0,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},je={key:1,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},Re={class:"text-12px",style:{"line-height":"1.3"}},Ke={class:"text-12px",style:{"line-height":"1.3"}},Ge=["onClick"],Je={key:1},Qe=["onClick"],We={key:1},Ze={class:"text-[--third-text]"},Xe=ee(t({__name:"list",props:{modelValue:Boolean,tableList:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},tabActive:{type:[String,Number],default:"all"},searchOriginKeyword:{type:String,default:""},searchOriginType:{type:String,default:""},isAttention:{type:Boolean,default:!1}},emits:["filterAddress","handleSortChange","filterOriginAddress"],setup(e,{expose:t,emit:P}){const j=l(),ee=e,te=P;t({sort:function(e,t){var l;null==(l=null==ye?void 0:ye.value)||l.sort(e,t)},clearSort:function(){var e;null==(e=null==ye?void 0:ye.value)||e.clearSort()}});const{tableList:le,loading:ae}=a(ee),{mode:se}=s(r()),{token:re,price:oe,pair:ie}=s(l()),ne=o(),ue=i({buttonRefs:{}}),{t:ve}=n(),fe=r(),_e=d(),pe=u(),he=c(!0),be=c(!1),ge=c(""),xe=c(""),ye=m("holderListRef"),ke=v((()=>{var e,t;const l=pe.params.id;return l?f(l):{address:(null==(e=re.value)?void 0:e.token)||"",chain:(null==(t=re.value)?void 0:t.chain)||""}})),we=v((()=>Math.max(j.commonHeight-265,450)));function $e(e){if(!re.value)return;if(!R.includes(re.value.chain))return;const{symbol:t,logo_url:l,chain:a,token:s}=re.value,{target_token:r,token0_address:o,token0_symbol:i,token1_symbol:n,pair:d}=ie.value;ne.$patch({drawerVisible:!0,tokenInfo:{id:pe.params.id,symbol:t,logo_url:l,chain:a,address:s,remark:e.remark},pairInfo:{target_token:r,token0_address:o,token0_symbol:i,token1_symbol:n,pairAddress:d},user_address:e.holder})}function Ae(e,t=0){const l=Math.max(((null==e?void 0:e.bought)||0)-((null==e?void 0:e.sold)||0),0);return new X(t-((null==e?void 0:e.avg_purchase_price)||0)).times(l).toNumber()}function Xe(e,t=0){return Ae(e,t)+((null==e?void 0:e.realized_profit)||0)}function et(e){be.value=!1,te("filterAddress",e),xe.value=e||"",ge.value=e||""}function tt(e){te("handleSortChange",e)}function lt(e,t){te("filterOriginAddress",{address:e,type:t})}return(t,l)=>{const a=N,s=I,r=H,o=M,i=F,n=de,d=me,u=ce,c=_("tooltip"),m=g;return h(),p("div",Ne,[b((h(),y(u,{ref_key:"holderListRef",ref:ye,data:x(le),fit:"","scrollbar-always-on":"",height:x(we),style:{width:"100%"},onSortChange:tt,onRowClick:$e},{empty:k((()=>[x(ae)?(h(),p("span",De)):(h(),p("div",Ce,["light"===x(se)?(h(),p("img",Le)):S("",!0),"dark"===x(se)?(h(),p("img",Fe)):S("",!0),$("span",null,A(x(ve)("emptyNoData")),1)]))])),default:k((()=>{var u,m,v,f,_,g;return[w(d,{label:"#"+t.$t("holder"),align:"left","min-width":260,fixed:"left"},{header:k((()=>[$("div",Te,[$("span",null,A(t.$t("wallet2")),1),x(ge)?(h(),y(a,{key:0,name:"custom:filter",class:"color-[--d-FFF-l-000] cursor-pointer text-10px",onClick:l[0]||(l[0]=C((e=>et("")),["stop","prevent"]))})):(h(),y(o,{key:1,visible:x(be),"onUpdate:visible":l[3]||(l[3]=e=>z(be)?be.value=e:null),placement:"bottom-start",title:"",width:350,trigger:"click"},{reference:k((()=>[$("div",null,[w(a,{name:"custom:filter",class:"color-[--d-666-l-999] cursor-pointer text-10px"})])])),default:k((()=>[$("div",null,[$("div",Be,[w(s,{modelValue:x(xe),"onUpdate:modelValue":l[1]||(l[1]=e=>z(xe)?xe.value=e:null),modelModifiers:{trim:!0},placeholder:t.$t("searchWallet"),clearable:""},null,8,["modelValue","placeholder"])]),$("div",Se,[w(r,{class:"w-full",size:"default",color:x(_e).isDark?"#f5f5f5":"#222222",style:{height:"30px","min-width":"70px","--el-button-font-weight":"400"},onClick:l[2]||(l[2]=C((e=>et(x(xe))),["stop"]))},{default:k((()=>[D(A(t.$t("confirm")),1)])),_:1},8,["color"])])])])),_:1},8,["visible"]))])])),default:k((({row:e,$index:s})=>[$("div",Me,[$("div",ze,[$("span",Ie,A(s+1<10?"0":"")+A(s+1),1),w(a,{ref:e=>x(ue).buttonRefs[s]=e,name:"custom:attention",class:L([1===e.is_wallet_address_fav?"color-#F45469":"color-[--icon-color]","h-16px w-16px clickable shrink-0 mt-4px"]),onClick:C((t=>(async(e,t)=>{K().currentAddress||G().changeConnectVisible(!0),J().address&&!J().walletSignature[J().address]&&await J().signMessageForFavorite(),1===e.is_wallet_address_fav||ee.isAttention?W({address:K().currentAddress,user_address:e.holder,user_chain:e.chain}).then((()=>{fe.getFollowsNum(),Z.success(ve("attention1Canceled")),le.value[t].is_wallet_address_fav=0})).catch((e=>{})).finally((()=>{})):K().confirmAttention(ue.value.buttonRefs[t],e.chain,(l=>Q({address:K().currentAddress,user_address:e.holder,user_chain:e.chain,group:l.group,is_monitored:l.is_monitored}).then((e=>(fe.getFollowsNum(),le.value[t].is_wallet_address_fav=1,Promise.resolve(e)))).catch((e=>Promise.reject(e))).finally((()=>{}))))})(e,s)),["stop","prevent"])},null,8,["class","onClick"])]),$("div",He,[$("div",Oe,[$("div",Ve,[(h(),y(i,{key:e.holder,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block",remark:e.remark,address:e.holder,chain:e.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",wallet_logo:e.wallet_logo,showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},{default:k((()=>[$("div",qe,[l[6]||(l[6]=D(" ( ")),$("span",{style:T({color:(null==e?void 0:e.total_bought)?"#12B886":"var(--third-text)"}),class:"text-[--third-text]"},A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.total_bought)||0,2)),5),l[7]||(l[7]=D(" / ")),$("span",{style:T({color:(null==e?void 0:e.total_sold)?"#F6465D":"var(--third-text)"})},A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.total_sold)||0,2)),5),l[8]||(l[8]=D(" ) "))])])),_:2},1032,["remark","address","chain","wallet_logo","formatAddress"]))]),w(n,{tags:e.new_tags,walletAddress:e.holder,chain:e.chain},null,8,["tags","walletAddress","chain"])]),$("div",Ee,[Number(null==e?void 0:e.max_balance)>0?(h(),p("span",{key:0,style:T({width:100*((null==e?void 0:e.balance)||0)/((null==e?void 0:e.max_balance)||0)+"%"})},null,4)):S("",!0)])])])])),_:1},8,["label"]),w(d,{label:`${null==(m=x(O)(null==(u=x(ke))?void 0:u.chain))?void 0:m.main_name} ${t.$t("bal")}`,align:"right","min-width":"90"},{default:k((({row:e})=>[$("span",{style:T({color:(null==e?void 0:e.main_coin_balance)?"":"var(--third-text)"})},A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.main_coin_balance)||0,2)),5)])),_:1},8,["label"]),w(d,{label:t.$t("ratio")+x(he)?t.$t("bal"):t.$t("amount"),align:"right",width:x(V)((x(he)?t.$t("bal"):t.$t("amount"))+"/"+t.$t("ratio"))+100,sortable:"custom","sort-orders":["descending","ascending",null],prop:"balance"},{header:k((()=>[$("div",Ue,[$("span",null,A(t.$t("ratio"))+"/"+A(x(he)?t.$t("bal"):t.$t("amount")),1),b(w(a,{name:"custom:dollar",class:"color-[--third-text] clickable text-12px ml-3px",onClick:l[4]||(l[4]=C((e=>he.value=!1),["stop"]))},null,512),[[E,x(he)]]),b(w(a,{name:"custom:amount",class:"color-[--third-text] clickable text-12px ml-3px",onClick:l[5]||(l[5]=C((e=>he.value=!0),["stop"]))},null,512),[[E,!x(he)]])])])),default:k((({row:e})=>[-1===e.balance?(h(),p("span",Ye,A(t.$t("soldAll")),1)):(h(),p(q,{key:1},[$("div",{style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.balance_ratio)?"":"var(--third-text)"}])},A(("formatNumber"in t?t.formatNumber:x(B))(100*((null==e?void 0:e.balance_ratio)||0),1))+"% ",5),x(he)?(h(),p("div",Pe,A("$"+("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.balance_usd)||0,1)),1)):(h(),p("div",je,A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.balance)||0,1)),1))],64))])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("totalPnL"),align:"right",width:x(V)(t.$t("totalPnL"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"total_profit"},{default:k((({row:e})=>[$("div",{style:T([{color:Xe(e,x(oe))?Xe(e,x(oe))>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},A(Xe(e,x(oe))>0?"+":Xe(e,x(oe))?"-":"")+"$"+A(("formatNumber"in t?t.formatNumber:x(B))((Xe(e,x(oe))||0)*(Xe(e,x(oe))>0?1:-1),1)),5),$("div",{class:"text-12px",style:T([{color:(null==e?void 0:e.total_profit_ratio)?(null==e?void 0:e.total_profit_ratio)>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},A((null==e?void 0:e.total_profit_ratio)>0?"+":"")+A(("formatNumber"in t?t.formatNumber:x(B))(100*((null==e?void 0:e.total_profit_ratio)||0),1))+"% ",5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("realized"),align:"right","min-width":"120",width:x(V)(t.$t("realized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"realized_profit"},{default:k((({row:e})=>[$("span",{style:T({color:(null==e?void 0:e.realized_profit)?(null==e?void 0:e.realized_profit)>0?"#12B886":"#F6465D":"var(--third-text)"})},A((null==e?void 0:e.realized_profit)>0?"+":(null==e?void 0:e.realized_profit)?"-":"")+"$"+A(("formatNumber"in t?t.formatNumber:x(B))(((null==e?void 0:e.realized_profit)||0)*((null==e?void 0:e.realized_profit)>0?1:-1),1)),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("unrealized"),align:"right",width:x(V)(t.$t("unrealized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"unrealized_profit"},{default:k((({row:e})=>[$("span",{style:T({color:Ae(e,x(oe))?Ae(e,x(oe))>0?"#12B886":"#F6465D":"var(--third-text)"})},A(Ae(e,x(oe))>0?"+":Ae(e,x(oe))?"-":"")+"$"+A(("formatNumber"in t?t.formatNumber:x(B))((Ae(e,x(oe))||0)*(Ae(e,x(oe))>0?1:-1),1)),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("bought1"),align:"right","min-width":"100",width:x(V)(t.$t("bought1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"bought_usd"},{default:k((({row:e})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.bought_usd)?"#12B886":"var(--third-text)"}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.bought_usd)||0,1)),5),$("div",Re,[$("span",{style:T({color:(null==e||e.bought,"var(--third-text)")})},A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.bought)||0,1)),5)])])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("sold1"),align:"right",width:x(V)(t.$t("sold1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"sold_usd"},{default:k((({row:e})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.sold_usd)||0,2)),5),$("div",Ke,[$("span",{style:T({color:(null==e||e.sold,"var(--third-text)")})},A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.sold)||0,1)),5)])])),_:1},8,["label","width"]),w(d,{"class-name":"bg-12B8861A",label:t.$t("avgBuySell"),width:x(V)(t.$t("avgBuySell"))+70,align:"right","min-width":"120"},{default:k((({row:e})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==e||e.avg_purchase_price,"var(--third-text)")}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.avg_purchase_price)||0,2)),5),$("div",{class:"text-12px",style:T([{"line-height":"1.3"},{color:(null==e||e.avg_sale_price,"var(--third-text)")}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.avg_sale_price)||0,2)),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-286DFF1A",label:(null==(v=x(O)(x(ke).chain))?void 0:v.main_name)+t.$t("origin")+"/"+t.$t("time"),width:x(V)((null==(f=x(O)(x(ke).chain))?void 0:f.main_name)+t.$t("origin")+"/"+t.$t("time"))+70,align:"right","min-width":"150"},{default:k((({row:t})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==t?void 0:t.sol_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==t?void 0:t.sol_first_transfer_in_from)?(h(),p("a",{key:0,class:"address",href:"",onClick:C((e=>$e({holder:t.sol_first_transfer_in_from,remark:null==t?void 0:t.sol_first_transfer_in_from_remark})),["stop","prevent"])},[(h(),y(i,{key:t.sol_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:t.sol_first_transfer_in_from_remark,address:t.sol_first_transfer_in_from,chain:t.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Ge)):(h(),p("span",Je,"-")),(null==t?void 0:t.sol_first_transfer_in_from)?(h(),y(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:T({color:e.searchOriginKeyword&&"sol"==e.searchOriginType?"var(--main-text)":""}),onClick:C((e=>lt(null==t?void 0:t.sol_first_transfer_in_from,"sol")),["stop","prevent"])},null,8,["style","onClick"])):S("",!0)],4),$("div",{class:"text-12px",style:T([{"line-height":"1.3"},{color:(null==t?void 0:t.sol_first_transfer_in_time)?"var(--third-text":"var(--third-text)"}])},A(t.sol_first_transfer_in_time?x(U)(t.sol_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-286DFF1A",label:(null==(_=x(re))?void 0:_.symbol)+t.$t("origin")+"/"+t.$t("time"),align:"right","min-width":"150",width:x(V)((null==(g=x(re))?void 0:g.symbol)+t.$t("origin")+"/"+t.$t("time"))+70},{default:k((({row:t})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==t?void 0:t.token_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==t?void 0:t.token_first_transfer_in_from)?(h(),p("a",{key:0,class:"address",href:"",onClick:C((e=>$e({holder:t.token_first_transfer_in_from,remark:null==t?void 0:t.token_first_transfer_in_from_remark})),["stop","prevent"])},[(h(),y(i,{key:t.token_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:t.token_first_transfer_in_from_remark,address:t.token_first_transfer_in_from,chain:t.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Qe)):(h(),p("span",We,"-")),(null==t?void 0:t.token_first_transfer_in_from)?(h(),y(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:T({color:e.searchOriginKeyword&&"other"==e.searchOriginType?"var(--d-F5F5F5-l-222)":""}),onClick:C((e=>lt(null==t?void 0:t.token_first_transfer_in_from,"other")),["stop","prevent"])},null,8,["style","onClick"])):S("",!0)],4),$("div",{class:"text-12px",style:T([{"line-height":"1.3"},{color:(null==t||t.token_first_transfer_in_time,"var(--third-text)")}])},A(t.token_first_transfer_in_time?x(U)(t.token_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-286DFF1A",label:t.$t("TFInOut"),align:"right",width:x(V)(t.$t("TFInOut"))+70},{default:k((({row:e})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_in)?"#12B886":"var(--third-text)"}])}," +"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.transfer_in)||0,1)),5),$("div",{class:"text-12px",style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_out)?"#F6465D":"var(--third-text)"}])}," -"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.transfer_out)||0,1)),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-F6465D1A",label:t.$t("maxTx"),align:"right","min-width":"100",width:x(V)(t.$t("maxTx"))+70},{default:k((({row:e})=>[$("div",{style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_purchase_usd)?"#12B886":"var(--third-text)"}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.max_single_purchase_usd)||0,1)),5),$("div",{class:"text-12px",style:T([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+A(("formatNumber"in t?t.formatNumber:x(B))((null==e?void 0:e.max_single_sold_usd)||0,1)),5)])),_:1},8,["label","width"]),w(d,{"class-name":"bg-F6465D1A",label:t.$t("lastTx"),width:x(V)(t.$t("lastTx"))+70,align:"right"},{default:k((({row:e})=>[b((h(),p("span",Ze,[D(A(e.last_txn_time?x(Y)(new Date(e.last_txn_time).getTime()).fromNow():""),1)])),[[c,x(U)(e.last_txn_time,"YYYY-MM-DD HH:mm:ss")]])])),_:1},8,["label","width"])]})),_:1},8,["data","height"])),[[m,x(ae)&&!x(le).length]])])}}}),[["__scopeId","data-v-50ca4e21"]]),et={class:"profit"},tt={class:"right"},lt=["innerHTML"],at={key:2,class:"value"},st={class:"bottom"},rt={class:"item up"},ot={class:"label"},it={class:"value"},nt={class:"label"},dt={class:"value"},ut={class:"item down"},ct={class:"label"},mt={class:"value"},vt={class:"label"},ft={class:"value"},_t=ee(t({__name:"userTxsHead",props:{tableList:{},userAddress:{}},setup(e){const t=e,{t:a}=n(),o=G(),d=i(0),{mode:c}=s(r()),m=u(),{price:_,tokenInfoExtra:b}=s(l()),g=v((()=>m.params.id)),k=v((()=>{var e;return(null==(e=f(g.value))?void 0:e.address)||""})),w=v((()=>t.tableList.reduce(((e,t)=>O(t)?e+V(t):e),0))),N=v((()=>t.tableList.reduce(((e,t)=>O(t)?e+function(e){if(e.from_address===k.value)return e.from_amount;if(e.to_address===k.value)return e.to_amount;return e.amount0In>0?k.value===e.token0Address?e.amount0In:e.amount1Out:k.value===e.token1Address?e.amount1In:e.amount0Out}(t):e),0))),C=v((()=>t.tableList.reduce(((e,t)=>O(t)?e:e+V(t)),0))),L=v((()=>t.tableList.filter((e=>O(e))).length||0)),F=v((()=>t.tableList.filter((e=>!O(e))).length||0)),D=v((()=>N.value>0?w.value/N.value:0)),M=v((()=>{var e;let t=((null==(e=null==b?void 0:b.value)?void 0:e.sell_tax)||0)/100;return t=t>1?1:t,(_.value||0)*(d.value||0)*(1-t)})),z=v((()=>({value:C.value+M.value-w.value}))),I=v((()=>({value:w.value>0?z.value.value/w.value:0}))),H=v((()=>{var e,t;return[{label:a("currentPosition"),value:d.value,prefix:""},{label:`${a("tokenValue")}${(null==(e=null==b?void 0:b.value)?void 0:e.sell_tax)?` (-${a("sellTax1")} ${B((null==(t=null==b?void 0:b.value)?void 0:t.sell_tax)||0,2)}%)`:""}`,value:M.value,prefix:"$"},{label:a("positionCostPrice"),value:D.value,prefix:"$"},{label:a("profit"),value:z.value.value,type:"profit"},{label:"",value:I.value.value,type:"profitChange"}]}));function O(e){if(e.from_address&&e.from_address===k.value)return!1;if(e.to_address&&e.to_address===k.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==k.value}function V(e){return e.from_address===k.value?Number(e.from_amount)*Number(e.from_price_usd):e.to_address===k.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}async function E(){try{const e=m.params.id;if(e){const{chain:l}=f(e),a=await oe(e,[t.userAddress+"-"+l]);if(a&&a[0]){const{value:e}=a[0];d.value=e}}}finally{}}return te((()=>t.tableList),(e=>{(null==e?void 0:e.length)>0&&(d.value=0,E())}),{deep:!0}),te((()=>t.userAddress),(e=>{e&&(d.value=0,E())}),{deep:!0}),(e,t)=>{var l;const s=ue;return h(),p(q,null,[e.userAddress===(null==(l=x(o))?void 0:l.evmAddress)?(h(),y(s,{key:0,class:"myTxs-notice",type:"warning",title:x(a)("myTxsNotice"),"show-icon":"",closable:"",style:T({backgroundColor:"light"===x(c)?"#ffa94d0d":"rgba(117, 65, 29, 0.23)",color:"#ED6A0C",border:"none"})},null,8,["title","style"])):S("",!0),$("div",et,[(h(!0),p(q,null,le(x(H),((t,l)=>(h(),p("div",{key:l,class:"profit-container"},[$("div",tt,[$("span",{class:"label",innerHTML:t.label},null,8,lt),"profit"===t.type?(h(),p("span",{key:0,class:"value",style:T({color:x(z).value>=0?x(ae)[0]:x(se)[0]})},A(x(z).value>=0?"$"+x(B)(x(z).value):"-$"+x(B)(Math.abs(x(z).value))),5)):"profitChange"===t.type?(h(),p("span",{key:1,class:"value",style:T({color:x(z).value>=0?x(ae)[0]:x(se)[0]})},A(("formatPercent"in e?e.formatPercent:x(re))(x(I).value)),5)):(h(),p("span",at,A(t.prefix)+A(x(B)(t.value)),1))])])))),128))]),$("div",{class:"holder-container",style:T({"--upColor":x(ae)[0],"--downColor":x(se)[0],"--upBgColor":"#12B88633","--downBgColor":"#ff646d33"})},[$("div",st,[$("div",rt,[$("div",null,[$("span",ot,A(x(a)("buyFrequency")),1),$("span",it,A(x(B)(x(L))),1)]),$("div",null,[$("span",nt,A(x(a)("buyAmount"))+"($)",1),$("span",dt,A(x(B)(x(w))),1)])]),$("div",ut,[$("div",null,[$("span",ct,A(x(a)("sellFrequency")),1),$("span",mt,A(x(B)(x(F))),1)]),$("div",null,[$("span",vt,A(x(a)("sellAmount"))+"($)",1),$("span",ft,A(x(B)(x(C))),1)])])])],4)],64)}}}),[["__scopeId","data-v-4243258c"]]),pt={class:"histrory"},ht={class:"top"},bt={key:0,class:"content"},gt=["onClick"],xt=["innerHTML"],yt=ee(t({__name:"userTxsList",props:{tableList:{type:Array,default:()=>[]},userAddress:{type:String,default:""},scrollHeight:{type:String,default:"350px"},loadingMyTx:Boolean},setup(e){const t=e,{mode:a}=s(r()),o=u();i(""!==t.userAddress);const{token:n}=s(l()),d=v((()=>o.params.id)),c=v((()=>{var e;const t=d.value;return((null==(e=f(t))?void 0:e.address)||"").toLowerCase()}));function m(e){var t,l,a,s;if((null==(l=null==(t=e.from_address)?void 0:t.toLowerCase)?void 0:l.call(t))===c.value)return!1;if((null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===c.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==c.value}function _(e){var t,l,a,s;return(null==(l=null==(t=e.from_address)?void 0:t.toLowerCase)?void 0:l.call(t))===c.value?e.from_amount:(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===c.value?e.to_amount:e.amount0In>0?c.value===e.token0Address?e.amount0In:e.amount1Out:c.value===e.token1Address?e.amount1In:e.amount0Out}function b(e){var t,l,a,s;return(null==(l=null==(t=e.from_address)?void 0:t.toLowerCase)?void 0:l.call(t))===c.value?e.from_price_usd:(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===c.value?e.to_price_usd:c.value===e.token0Address?e.token0PriceUSD:e.token1PriceUSD}function g(e){var t,l,a,s;return(null==(l=null==(t=e.from_address)?void 0:t.toLowerCase)?void 0:l.call(t))===c.value?Number(e.from_amount)*Number(e.from_price_usd):(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===c.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}return(e,l)=>{var s;const r=fe,o=ve;return h(),p("div",pt,[w(_t,{tableList:t.tableList,userAddress:t.userAddress},null,8,["tableList","userAddress"]),$("div",ht,[$("span",null,A(e.$t("time")),1),$("span",null,A(e.$t("type")),1),$("span",null,A(e.$t("price"))+"($)",1),$("span",null,A(e.$t("amountB"))+"("+A(null==(s=x(n))?void 0:s.symbol)+")",1),$("span",null,A(e.$t("amountU"))+"($)",1),l[0]||(l[0]=$("span",null,"Tx",-1))]),w(o,{height:t.scrollHeight},{default:k((()=>[t.tableList.length>0?(h(),p("ul",bt,[(h(!0),p(q,null,le(t.tableList,((t,l)=>{var a,s;return h(),p("li",{key:l,class:"flex",onClick:C((e=>function(e){window.open(ie(e.network,e.transactionAddress,"tx"))}(t)),["stop"])},[$("span",null,A(x(U)(t.timestamp)),1),$("div",{class:L({green:m(t),red:!m(t)})},[$("span",null,A(m(t)?e.$t("buy"):e.$t("sell")),1)],2),$("div",{class:L({green:m(t),red:!m(t)})},[$("span",{innerHTML:x(B)(b(t)||0)},null,8,xt)],2),$("div",{class:L({green:m(t),red:!m(t)})},A(x(B)(_(t))),3),$("span",null,A(x(B)(g(t))),1),$("span",null,A(null==(a=t.transactionAddress)?void 0:a.slice(0,2))+"..."+A(null==(s=t.transactionAddress)?void 0:s.slice(-4)),1)],8,gt)})),128))])):S("",!0),t.tableList&&0!==t.tableList.length?S("",!0):(h(),y(r,{key:1,"image-size":100,image:"light"===x(a)?x(P):x(j)},null,8,["image"]))])),_:1},8,["height"])])}}}),[["__scopeId","data-v-600613fb"]]),kt={key:0,class:"flex-start address mt-20px"},wt=["href"],$t=t({__name:"profitLoss",props:{modelValue:Boolean},emits:["update:modelValue"],setup(t,{expose:l,emit:s}){const r=t;l({getUserTxs:function(t){L.value=t,g.value=[],m.value=!0;(function(t){const{$api:l}=e();return l("/v1api/v2/pairs/userMergedTxs",{method:"get",query:t})})({token_id:D.value,user_address:t}).then((e=>{g.value=e.map((e=>({...e,timestamp:1e3*Number(e.time)||0,network:e.chain||"bsc",transactionAddress:e.transaction,walletAddress:e.wallet_address})))})).finally((()=>{m.value=!1}))}});const{modelValue:o}=a(r),n=u(),d=s,m=c(!1),g=i([]),L=c(""),F=v({get:()=>o.value,set(e){d("update:modelValue",e)}}),D=v((()=>n.params.id)),T=v((()=>{var e;return null==(e=f(n.params.id))?void 0:e.chain}));return(e,t)=>{const l=N,a=ne,s=_("copy");return h(),y(a,{modelValue:x(F),"onUpdate:modelValue":t[1]||(t[1]=e=>z(F)?F.value=e:null),width:"860",height:"600","header-class":"p-0!",title:e.$t("transactionsDetails")},{default:k((()=>{var e,a;return[x(L)?(h(),p("div",kt,[$("span",null,[$("a",{href:x(ie)(x(T),x(L),"address"),target:"_blank"},A((null==(e=x(L))?void 0:e.slice(0,6))+"..."+(null==(a=x(L))?void 0:a.slice(-6))),9,wt),b(w(l,{name:"bxs:copy",class:"text-12px ml-2px cursor-pointer ml-10px",onClick:t[0]||(t[0]=C((()=>{}),["stop","prevent"]))},null,512),[[s,x(L)]])])])):S("",!0),w(yt,{tableList:x(g),userAddress:x(L),loadingMyTx:x(m)},null,8,["tableList","userAddress","loadingMyTx"])]})),_:1},8,["modelValue","title"])}}});export{Xe as L,_e as _,Ae as a,we as b,ke as c,$t as d,xe as e,ye as f,$e as g,pe as h,he as i,ge as j,be as s};
